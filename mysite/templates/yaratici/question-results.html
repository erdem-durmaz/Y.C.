{% extends './base.html'%}

{% block title %} {% endblock  %}
{% block meta %} {% endblock  %}

{% block css %}
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

<link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>

<style>
    @import url(https://fonts.googleapis.com/css?family=Roboto);

body {
    background-color: #f2f2f2;
    color: #000;
    font-family: 'Ubuntu', sans-serif;
}

.column-chart {
  position: relative;
  z-index: 20;
  bottom: 0;
  left: 50%;
  width: 100%;
  height: 320px;
  margin-top: 40px;
  margin-left: -50%;
}

@media (min-width: 568px) {
  .column-chart {
    width: 80%;
    margin-left: -40%;
  }
}

@media (min-width: 768px) {
  .column-chart {
    width: 60%;
    margin-left: -30%;
  }
}

@media (min-width: 992px) {
  .column-chart {
    width: 40%;
    margin-left: -20%;
  }
}

@media (min-width: 1024px) {
  .column-chart {
    width: 36%;
    margin-left: -18%;
  }
}

.column-chart:before,
.column-chart:after {
  position: absolute;
  content: '';
  top: 0;
  left: 0;
  width: calc(100% + 30px);
  height: 25%;
  margin-left: -15px;
  border-top: 1px dashed #b4b4b5;
  border-bottom: 1px dashed #b4b4b5;
}

.column-chart:after {
  top: 50%;
}

.column-chart > .legend {
  position: absolute;
  z-index: -1;
  top: 0;
}

.column-chart > .legend.legend-left {
  left: 0;
  width: 25px;
  height: 75%;
  margin-left: -55px;
  border: 1px solid #b4b4b5;
  border-right: none;
}

.column-chart > .legend.legend-left > .legend-title {
  display: block;
  position: absolute;
  top: 50%;
  left: 0;
  width: 65px;
  height: 50px;
  line-height: 50px;
  margin-top: -25px;
  margin-left: -60px;
  font-size: 28px;
  letter-spacing: 1px;
}

.column-chart > .legend.legend-right {
  right: 0;
  width: 100px;
  height: 100%;
  margin-right: -115px;
}

.column-chart > .legend.legend-right > .item {
  position: relative;
  width: 100%;
  height: 25%;
}

.column-chart > .legend.legend-right > .item > h4 {
  display: block;
  position: absolute;
  top: 0;
  right: 0;
  width: 100px;
  height: 40px;
  line-height: 40px;
  margin-top: -20px;
  font-size: 16px;
  text-align: right;
}

.column-chart > .chart {
  position: relative;
  z-index: 20;
  bottom: 0;
  left: 50%;
  width: 98%;
  height: 100%;
  margin-left: -49%;
}

.column-chart > .chart > .item {
  position: relative;
  float: left;
  height: 100%;
}

.column-chart > .chart > .item:before {
  position: absolute;
  z-index: -1;
  content: '';
  bottom: 0;
  left: 50%;
  width: 1px;
  height: calc(100% + 15px);
  border-right: 1px dashed #b4b4b5;
}

.column-chart > .chart > .item > .bar {
  position: absolute;
  bottom: 25px;
  left: 3px;
  width: 94%;
  height: 100%;
}

.column-chart > .chart > .item > .bar > span.percent {
  display: block;
  position: absolute;
  z-index: 25;
  bottom: -25px;
  left: 0;
  width: 100%;
  height: 26px;
  line-height: 26px;
  color: #fff;
  background-color: #EDA3A7;
  font-size: 14px;
  font-weight: 700;
  text-align: center;
  letter-spacing: 1px;
}

.column-chart > .chart > .item > .bar > .item-progress {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 20%;
  color: #fff;
  background-color: #7380C6;
}

.column-chart > .chart > .item > .bar > .item-progress > .title {
  <!-- position: absolute; -->
  top: calc(50% - 13px);
  left: 50%;
  font-size: 14px;
  text-align: center;
  <!-- text-transform: uppercase; -->
  letter-spacing: 0px;
  -moz-transform: translateX(-50%) translateY(-50%) rotate(-90deg);
  -webkit-transform: translateX(-50%) translateY(-50%) rotate(-90deg);
  transform: translateX(-50%) translateY(-50%) rotate(-90deg);
}

@media (min-width: 360px) {
  .column-chart > .chart > .item > .bar > .item-progress > .title {
    font-size: 16px;
  }
}

@media (min-width: 480px) {
  .column-chart > .chart > .item > .bar > .item-progress > .title {
    font-size: 18px;
  }
}
</style>

<style>
    .container {
        margin-top: 20px
    }
    
    .counter-box {
        display: block;
        background: #f6f6f6;
        padding: 40px 20px 37px;
        text-align: center
    }
    
    .counter-box p {
        margin: 5px 0 0;
        padding: 0;
        color: #909090;
        font-size: 18px;
        font-weight: 500
    }
    
    .counter-box i {
        font-size: 60px;
        margin: 0 0 15px;
        color: #d2d2d2
    }
    
    .counter {
        display: block;
        font-size: 32px;
        font-weight: 700;
        color: #666;
        line-height: 28px
    }
    
    .counter-box.colored {
        background: #3acf87
    }
    
    .counter-box.colored p,
    .counter-box.colored i,
    .counter-box.colored .counter {
        color: #fff
    }
    .header-top {
      position: relative;
    }
    
</style>
{% endblock css %}


{%block content%}



<!-- pembe -->
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="text-center ">
                <h2>{{question.question}}</h2>
                <h3>Sonuçlar</h3>
            </div>
            <!-- //.text-center -->

            <div class="column-chart">
                <div class="legend legend-left hidden-xs">
                    <h3 class="legend-title"></h3>
                </div>
                <!-- //.legend -->

                <div class="legend legend-right hidden-xs">
                    <div class="item">
                        <h4>%100</h4>
                    </div>
                    <!-- //.item -->

                    <div class="item">
                        <h4>%75</h4>
                    </div>
                    <!-- //.item -->

                    <div class="item">
                        <h4>%50</h4>
                    </div>
                    <!-- //.item -->

                    <div class="item">
                        <h4>%25</h4>
                    </div>
                    <!-- //.item -->
                </div>
                <!-- //.legend -->

                <div class="chart clearfix">

                    {% for choice in question.choices_set.all %}
                    <div class="item">
                        <div class="bar">
                            <span class="percent">{{choice.counter}}</span>
                            {% for key,value in dict.items %}
                            {% if key == choice.choice %}
                            <div class="item-progress" data-percent="{{value}}">
                                <span class="title">{{choice.choice}} %{{value}}</span>
                            </div>
                            {% endif %}
                            {%endfor%}
                            <!-- //.item-progress -->
                        </div>
                        <!-- //.bar -->
                    </div>
                    <!-- //.item -->
                    {%endfor%}


                </div>
                <!-- //.chart -->
            </div>
            <!-- //.column-chart -->
        </div>
        <!-- //.col-md-6 -->
    </div>
    <!-- //.row -->
</div>
<!-- //.pembe bitiş -->


<div class="container w-25 ">
    {% for choice in question.choices_set.all %}

                            {% for key,value in dict.items %}
                            {% if key == choice.choice %}
                            <li class="list-group-item">
                                <span class='col-11'>{{choice.choice}}- %{{value}}</span>
                        
                            </li>
                            {% endif %}
                            {%endfor%}
                            {%endfor%}
                            <br>
    
</div>

<div class="related-question-post">
  <div class="h3">Bu konuyla ilgili olan blog yazımızı okumuş muydunuz?</div>


  <div class="related-question-post-container">
      <div class="post-list-item col-xs-12 space-bottom col-sm-12 col-md-12 "
          data-masonry-width="col-sm-12.col-md-12">
          <div id="post-{{question.blogpost.id}}">
              <div class="post-container">
                  <div class="post-inner">
                      <div class="row">
                          <div class="col-md-2 col-sm-4 thumb-col">
                              <div class="thumb-container">
                                  <div  class="post-thumbnail">
                                      <a href="{%url 'yaratici:show_post' slug=question.blogpost.slug %}"
                                          class="post-list-item-thumb ">
                                          <img width="626" height="417"
                                              src="{{question.blogpost.photo.url}}"
                                              class="attachment-post-thumbnail size-post-thumbnail wp-post-image"
                                              alt="" loading="lazy"
                                              srcset="{{question.blogpost.photo.url}} 626w, {{question.blogpost.photo.url}} 300w"
                                              sizes="(max-width: 626px) 100vw, 626px" /> </a>
                                  </div>
                              </div>
                          </div>
                          <div class="col-md-10 col-sm-8 text-left item-content">
                              <div class="list-padding">
                                  <h2 class="post-title text-left h4">
                                      <a href="{%url 'yaratici:show_post' slug=question.blogpost.slug %}"
                                          rel="bookmark">{{question.blogpost.title}}</a>
                                  </h2>
                                  <div class="post-excerpt">
                                      <p>{{question.blogpost.message|truncatewords:20|safe}}<a
                                              class="read-more"
                                              href="{%url 'yaratici:show_post' slug=question.blogpost.slug %}">Yazının
                                              Devamı...</a>
                                      </p>
                                  </div>
                              </div>
                          </div>
                      </div><!-- /row -->
                  </div>
              </div>
          </div>
      </div>
  </div>
  <a href="{% url 'yaratici:home' %}"><button type="submit" class="button big color-blue ">Anasayfaya Dön</button></a>
  <br><br>
</div>

<script>
    $(document).ready(function(){
        columnChart();
        
        function columnChart(){
            var item = $('.chart', '.column-chart').find('.item'),
            itemWidth = 100 / item.length;
            item.css('width', itemWidth + '%');
            
            $('.column-chart').find('.item-progress').each(function(){
                var itemProgress = $(this),
                itemProgressHeight = $(this).parent().height() * ($(this).data('percent') / 100);
                itemProgress.css('height', itemProgressHeight);
            });
        };
    });
</script>




{%endblock%}